{{ include "terra-batch-libchart.cbas-api-deploy" (list . "cromwell-helm.cbas-api-deploy") }}
{{ define "cromwell-helm.cbas-api-deploy" }}
{{ end }}

---

{{ include "terra-batch-libchart.cbas-api-service" (list . "cromwell-helm.cbas-api-service") }}
{{ define "cromwell-helm.cbas-api-service" }}
{{ end }}

---

{{ include "terra-batch-libchart.cbas-api-config" (list . "cromwell-helm.cbas-api-config") }}
{{ define "cromwell-helm.cbas-api-config" }}
data:
  {{ .Values.cbas.conf_file }}: |-
    workflow-engines:
      cromwell:
        baseUri: "http://{{ include "app.fullname" . }}-cromwell-svc:8000"
        healthUri: "http://{{ include "app.fullname" . }}-cromwell-svc:8000/engine/v1/status"
    wds:
      baseUri: "http://{{ include "app.fullname" . }}-wds-svc:8080"
      healthcheckEndpoint: "/swagger/swagger-ui.html"
      instanceId: "15f36863-30a5-4cab-91f7-52be439f1175"
      apiV: "v0.2"
{{ end }}
