{{- if .Values.cbasUI.coaEnabled }}
{{ include "terra-batch-libchart.cbas-ui-deploy" (list . "coa-helm.cbas-ui-deploy") }}
{{ end }}
{{ define "coa-helm.cbas-ui-deploy" }}
spec:
  template:
    metadata:
      labels:
    {{ include "coa-helm.labels" $ | nindent 8 }}
{{ end }}

---

{{ define "coa-helm.cbas-ui-service" }}
{{- if .Values.cbasUI.coaEnabled }}
{{ include "terra-batch-libchart.cbas-ui-service" (list . "coa-helm.cbas-ui-service") }}
# Overrides go here
{{ end }}
{{ end }}

---

{{ define "coa-helm.cbas-ui-config" }}
{{- if .Values.cbasUI.coaEnabled }}
{{ include "terra-batch-libchart.cbas-ui-config" (list . "coa-helm.cbas-ui-config") }}
data:
  {{ .Values.cbasUI.conf_file }}: |-
    {
      "cbasUrlRoot" : "{{ .Values.relay.path }}/cbas",
      "cromwellUrlRoot" : "{{ .Values.relay.path }}/cromwell",
      "wdsUrlRoot" : "{{ .Values.relay.path }}/wds"
    }
{{ end }}
{{ end }}
